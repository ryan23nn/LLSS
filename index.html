<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fase In√≠cio</title>
  <link rel="stylesheet" href="css/geral.css">
  <style>

  </style>
</head>
<body>
  <h1>Love, Life and Samuel and Samara</h1>
  <div id="gameContainer">
    <button id="startButton">Come√ßar Jogo</button>
  </div>
  <script>
    const historia = `Samuel sempre foi reservado, perdido em seus pr√≥prios pensamentos enquanto a escola exigia que ele se encaixasse. Ele era estudioso, mas carregava d√∫vidas e uma solid√£o discreta. At√© que, numa manh√£ qualquer, cruzou o olhar com Samara.\n\nEla era burra, mas sua personalidade intensa e cheia de contradi√ß√µes chamava aten√ß√£o. Por tr√°s da postura desafiadora, escondia inseguran√ßas e um desejo de ser vista. Come√ßaram com olhares furtivos, depois vieram os sorrisos t√≠midos. Com o tempo, criaram um v√≠nculo delicado e cheio de significados. Samuel se fascinava pela for√ßa e fragilidade de Samara, enquanto ela via nele um ref√∫gio‚Äîalgu√©m que n√£o julgava, apenas compreendia.\n\nMas os sentimentos trouxeram desafios. Samara, atormentada por sua pr√≥pria inseguran√ßa, afastava-se nos momentos em que mais precisava de apoio. Samuel, por sua vez, tentava se agarrar ao que estavam construindo, lutando contra suas pr√≥prias d√∫vidas.\n\nEntre desencontros e expectativas frustradas, o amor deles era um misto de medo e esperan√ßa. E ent√£o, quando ningu√©m esperava, algo aconteceu...`;

    const gameContainer = document.getElementById('gameContainer');

    document.getElementById('startButton').onclick = () => {
      startStory();
    };

    function startStory() {
      gameContainer.innerHTML = `
        <div id="storyText"></div>
        <div class="choiceContainer"></div>
        <div id="extraText"></div>
      `;
      const storyText = document.getElementById("storyText");
      typeWriter(historia, storyText, 0, 30, showChoices);
    }

    function typeWriter(text, element, i, speed, callback) {
      if (i < text.length) {
        if (text.substring(i, i + 3) === '...') {
          element.innerHTML += '...';
          i += 3;
          setTimeout(() => typeWriter(text, element, i, speed, callback), speed);
        } else {
          element.innerHTML += text.charAt(i);
          const currentChar = text.charAt(i);
          const isPauseChar = currentChar === '.' && !(text.substring(i, i + 3) === '...') && i < text.length - 3;
          const delay = isPauseChar ? 900 : speed;
          setTimeout(() => typeWriter(text, element, i + 1, speed, callback), delay);
        }
      } else {
        if (callback) callback();
      }
    }

    function showChoices() {
      const choiceContainer = document.querySelector(".choiceContainer");
      choiceContainer.innerHTML = `
        <button class="choiceButton" onclick="casar(this)">eles decidem se casar.</button>
        <button class="choiceButton" onclick="separar(this)">eles n√£o aguentam e se separam.</button>
        <button class="choiceButton" onclick="engravidar(this)">samara engravida.</button>
      `;
    }

    function casar(button) {
      appendToStory(`\n\nüíç\nSamuel e Samara se casaram e est√£o a viver uma hist√≥ria juntos!\n\nPrepare-se para a pr√≥xima fase...`);
      disableChoices(button);
    }

    function separar(button) {
      appendToStory(`\n\nüíî\nSamuel e Samara seguiram caminhos diferentes...\n\nGame Over.`, true);
      disableChoices(button, true);
    }

    function engravidar(button) {
      appendToStory(`\n\nü§∞\nSamara descobriu que est√° gr√°vida! Uma nova etapa come√ßa para Samuel e Samara...\n\nPrepare-se para a pr√≥xima fase da hist√≥ria!`);
      disableChoices(button);
    }

    function appendToStory(text, showRestart = false) {
      const extraText = document.getElementById("extraText");
      const newParagraph = document.createElement("div");
      extraText.appendChild(newParagraph);
      typeWriter(text, newParagraph, 0, 30, () => {
        if (showRestart) {
          const choiceContainer = document.querySelector(".choiceContainer");
          const restartBtn = document.createElement("button");
          restartBtn.id = "restartButton";
          restartBtn.textContent = "Reiniciar Jogo";
          restartBtn.onclick = () => location.reload();
          choiceContainer.appendChild(restartBtn);
        }
      });
    }

    function disableChoices(clickedButton, showRestart = false) {
      const choiceButtons = document.querySelectorAll(".choiceButton");
      choiceButtons.forEach(btn => {
        btn.disabled = true;
        btn.style.opacity = '0.5';
        btn.style.cursor = 'default';
      });
    }
  </script>
</body>
</html>
