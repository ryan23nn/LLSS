<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fase 0</title>
  <link rel="stylesheet" href="css/geral.css">
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      text-align: center;
      margin: 0;
      padding: 0;
    }

    #gameContainer {
      max-width: 700px;
      padding: 20px;
    }

    #storyText {
      white-space: pre-wrap;
      margin-top: 30px;
      min-height: 200px;
      font-size: 1.4em;
      line-height: 1.3;
      color: #fff;
      text-align: left;
    }

    #startButton, .choiceButton, #restartButton {
      background-color: transparent;
      color: #fff;
      border: 1.5px solid #fff;
      padding: 10px 25px;
      font-size: 1.2em;
      cursor: pointer;
      margin-top: 15px;
      border-radius: 6px;
      font-weight: 600;
      text-transform: none;
      box-shadow: none;
      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
    }

    #startButton:hover,
    .choiceButton:hover,
    #restartButton:hover {
      background-color: #444;
      color: #fff;
      border-color: #fff;
    }

    #startButton:active,
    .choiceButton:active,
    #restartButton:active {
      background-color: #666; 
      color: #fff;
      border-color: #fff;
      transform: scale(0.98);
    }

    .choiceContainer {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-top: 30px;
      align-items: center;
    }
  </style>
</head>
<body>
  <div id="gameContainer">
    <button id="startButton">Come√ßar Jogo</button>
  </div>

  <script>
    const historia = `Samuel sempre foi o tipo de garoto que ningu√©m notava. T√≠mido ao extremo, afundava no sil√™ncio da sua pr√≥pria mente enquanto o mundo ao redor pulsava r√°pido demais. Era estudioso, sim, mas tamb√©m cheio de d√∫vidas, medo e uma solid√£o que s√≥ ele parecia carregar. Na Escola Maria Santos Bair√£o, onde a press√£o por ser algu√©m era quase sufocante, ele mal conseguia se encaixar. At√© que, numa manh√£ cinzenta, cruzou o olhar com Samara.\n\nSamara n√£o era a aluna que chamava aten√ß√£o pela intelig√™ncia; longe disso. Ela trope√ßava nas mat√©rias, cometia erros bobos e parecia sempre estar um passo atr√°s dos colegas. Mas tinha algo que n√£o se aprende nos livros: uma personalidade crua, √°spera, quase revoltada. Uma do√ßura escondida em camadas de inseguran√ßa e uma vontade feroz de ser vista ‚Äî mesmo que, por dentro, estivesse perdida em seus pr√≥prios medos e um passado que ningu√©m conhecia.\n\nEles come√ßaram com olhares furtivos no corredor, depois sorrisos t√≠midos entre as tarefas. Aos poucos, algo mais complicado cresceu. Samuel, fascinado pela vulnerabilidade e for√ßa contradit√≥ria de Samara, tentava entend√™-la, enquanto ela via nele um porto seguro ‚Äî algu√©m que n√£o julgava, que parecia se importar al√©m do √≥bvio. Mas o que poderia ter sido um amor puro logo se enredou em incertezas e cobran√ßas.\n\nAs tardes de estudos viraram encontros silenciosos, recheados de olhares pesados e conversas cheias de significados n√£o ditos. Samara, assombrada pela sensa√ß√£o constante de n√£o ser boa o suficiente, se afastava nos momentos em que mais precisava de apoio. Samuel, por sua vez, lutava contra o medo de perder aquilo que come√ßava a sentir, e contra sua pr√≥pria inseguran√ßa que o fazia questionar se merecia algo t√£o intenso.\n\nEntre brigas por ci√∫mes, l√°grimas escondidas e a press√£o de uma vida que insistia em n√£o dar tr√©gua, eles se agarravam a essa hist√≥ria de amor fr√°gil, torta e cheia de reviravoltas. O amor deles n√£o era conto de fadas, era uma batalha di√°ria, uma mistura dolorosa de desejo, medo e esperan√ßa.\n\nE ent√£o, quando ningu√©m esperava, algo aconteceu...`;

    const gameContainer = document.getElementById('gameContainer');

    document.getElementById('startButton').onclick = () => {
      startStory();
    };

    function startStory() {
      gameContainer.innerHTML = `
        <div id="storyText"></div>
        <div class="choiceContainer"></div>
      `;
      const storyText = document.getElementById("storyText");
      typeWriter(historia, storyText, 0, 30, showChoices);
    }

    function typeWriter(text, element, i, speed, callback) {
      if (i < text.length) {
        if (text.substring(i, i + 3) === '...') {
          element.innerHTML += '...';
          i += 3;
          setTimeout(() => typeWriter(text, element, i, speed, callback), speed);
        } else {
          element.innerHTML += text.charAt(i);
          const currentChar = text.charAt(i);
          const isPauseChar = currentChar === '.' && !(text.substring(i, i + 3) === '...') && i < text.length - 3;
          const delay = isPauseChar ? 900 : speed;
          setTimeout(() => typeWriter(text, element, i + 1, speed, callback), delay);
        }
      } else {
        if (callback) callback();
      }
    }

    function showChoices() {
      const choiceContainer = document.querySelector(".choiceContainer");
      choiceContainer.innerHTML = `
        <button class="choiceButton" onclick="casar(this)">eles decidem se casar.</button>
        <button class="choiceButton" onclick="separar(this)">eles n√£o aguentam e se separam.</button>
        <button class="choiceButton" onclick="engravidar(this)">samara engravida.</button>
      `;
    }

    function casar(button) {
      appendToStory(`\n\nüíç\nSamuel e Samara se casaram e est√£o a viver uma hist√≥ria juntos!\n\nPrepare-se para a pr√≥xima fase...`);
      disableChoices(button);
    }

    function separar(button) {
      appendToStory(`\n\nüíî\nSamuel e Samara seguiram caminhos diferentes...\n\nGame Over.`);
      disableChoices(button, true);
    }

    function engravidar(button) {
      appendToStory(`\n\nü§∞\nSamara descobriu que est√° gr√°vida! Uma nova etapa come√ßa para Samuel e Samara...\n\nPrepare-se para a pr√≥xima fase da hist√≥ria!`);
      disableChoices(button);
    }

    function appendToStory(text) {
      const storyText = document.getElementById("storyText");
      // adiciona texto mantendo o existente
      storyText.innerHTML += text.replace(/\n/g, "<br>");
    }

    // Desabilita todos os bot√µes de escolha e, se especificado, adiciona bot√£o de reiniciar
    function disableChoices(clickedButton, showRestart = false) {
      const choiceButtons = document.querySelectorAll(".choiceButton");
      choiceButtons.forEach(btn => {
        btn.disabled = true;
        btn.style.opacity = '0.5';
        btn.style.cursor = 'default';
      });
      if (showRestart) {
        const choiceContainer = document.querySelector(".choiceContainer");
        const restartBtn = document.createElement("button");
        restartBtn.id = "restartButton";
        restartBtn.textContent = "Reiniciar Jogo";
        restartBtn.onclick = () => location.reload();
        choiceContainer.appendChild(restartBtn);
      }
    }
  </script>
</body>
</html>
